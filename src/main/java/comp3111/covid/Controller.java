package comp3111.covid;

import org.apache.commons.csv.CSVRecord;

import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.ChoiceBox;
import javafx.scene.control.Tab;
import javafx.scene.control.TextArea;
import javafx.scene.control.TextField;
import javafx.scene.input.MouseEvent;

/**
 * Building on the sample skeleton for 'ui.fxml' Controller Class generated by SceneBuilder 
 */
public class Controller {

    @FXML
    private Tab tabTaskZero;

    @FXML
    private TextField textfieldISO;

    @FXML
    private Button buttonConfirmedDeaths;

    @FXML
    private TextField textfieldDataset;

    @FXML
    private Button buttonRateOfVaccination;

    @FXML
    private Button buttonConfirmedCases;

    @FXML
    private Tab tabReport1;

    @FXML
    private Tab tabReport2;

    @FXML
    private Tab tabReport3;

    @FXML
    private TextField textfieldDatasetTAB3;

    @FXML
    private Button buttonTableCReportTab3;
    
    @FXML
    private ChoiceBox<String> countryChoiceTab3;

    @FXML
    private TextField dateInputTab3;
    
    
    
    @FXML
    private Tab tabApp1;

    @FXML
    private Tab tabApp2;

    @FXML
    private Tab tabApp3;

    @FXML
    private TextArea textAreaConsole;

  

    /**
     *  Task Zero
     *  To be triggered by the "Confirmed Cases" button on the Task Zero Tab 
     *  
     */
    @FXML
    void doConfirmedCases(ActionEvent event) {
    	String iDataset = textfieldDataset.getText();
    	String iISO = textfieldISO.getText();
    	String oReport = DataAnalysis.getConfirmedCases(iDataset, iISO);
    	textAreaConsole.setText(oReport);
    }

  
    /**
     *  Task Zero
     *  To be triggered by the "Confirmed Deaths" button on the Task Zero Tab
     *  
     */
    @FXML
    void doConfirmedDeaths(ActionEvent event) {
    	String iDataset = textfieldDataset.getText();
    	String iISO = textfieldISO.getText();
    	String oReport = DataAnalysis.getConfirmedDeaths(iDataset, iISO);
    	textAreaConsole.setText(oReport);
    }

  
    /**
     *  Task Zero
     *  To be triggered by the "Rate of Vaccination" button on the Task Zero Tab
     *  
     */
    @FXML
    void doRateOfVaccination(ActionEvent event) {
    	String iDataset = textfieldDataset.getText();
    	String iISO = textfieldISO.getText();
    	String oReport = DataAnalysis.getRateOfVaccination(iDataset, iISO);
    	textAreaConsole.setText(oReport);
    }  

    /*Input
     * countries&&Date*/
   
    @FXML
    void doTCGetReportTab3(ActionEvent event) {
    	//String iDataset = textfieldDataset.getText();
    	String iISO = textfieldISOtab3.getText();
    	//String oReport = DataAnalysis.getConfirmedCases(iDataset, iISO);
    	textAreaConsole.setText(iISO);
    }
    
    //Tab3 begins heren the list to the checkbox 

    //TODO: 
    @FXML
    void getReportTAB3(ActionEvent event) {
    	/*String iDataset = textfieldDataset.getText();
    	String iISO = textfieldISO.getText();*/
    	String Dataset=textfieldDatasetTAB3.getText();
    	String CountryCode="AFG,HKO";
    	String Date="01/01/2020";
    	String oReport = DataAnalysis.getVaccinationRateTAB3(Dataset, CountryCode,Date);
    	textAreaConsole.setText(oReport);
    }
    
    //TODO: 
    @FXML
    void getReportCHART3(ActionEvent event) {
    	/*String iDataset = textfieldDataset.getText();
    	String iISO = textfieldISO.getText();*/
    	String dataset="A";
    	String countryCode="B";
    	String startDate="C";
    	String endDate="D";
    	String oReport = DataAnalysis.getVaccinationRateChart3(dataset, countryCode,startDate,endDate);
    	textAreaConsole.setText(oReport);
    }
    
    @FXML
    void addCountriesToCheckBoxTab3(MouseEvent event) {
    	String DataSetTab3 = textfieldDataset.getText();
    	
    	int addedCountryNum=0;
    	//String[] addedCountry= new String[500];//??is there any way to find the exact number of the country in the list
    	
    	countryChoiceTab3.getItems().addAll("china");
    //add all the countries i
    	/*for (CSVRecord rec : DataAnalysis.getFileParser(DataSetTab3)) {
    		String country=rec.get("iso_code");
    		boolean alreadyAdded=false;
    		for(int i=0;i<addedCountryNum;i++) 
    			{
    				if(country.equals(addedCountry[i]))
    					{System.out.println(country);
    					System.out.println(addedCountry[i]);   				
    					alreadyAdded=true;
    					System.out.println(i);
    					break;}
    			}
    		if(alreadyAdded==false) 
    			{
    				countryChoiceTab3.getItems().add(addedCountryNum, country);
        			addedCountry[addedCountryNum]=country;
        			addedCountryNum++;
    			}
    		
    }*/}
}

